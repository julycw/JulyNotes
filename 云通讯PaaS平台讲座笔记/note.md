# 云通讯PaaS平台讲座笔记

上节课没记，这是第二节课我感兴趣的内容

## 一般架构
LVS + Nginx + 业务服务N个 + 数据库N个

## Cassindra数据库

这款数据库主要针对场景为分布式场景。这款nosql数据库可以指定不同数据的一致性要求。

## 故障检测、修复

用户发起请求后，当发生故障时，一般客户端会尝试重新发起请求。因此，必须在用户发起重试之前，确定服务器端是否真的发生故障，如果是的话，则调用API修改Nginx代理跳转到正常的服务器，确保用户之后的请求正确。

##长连接、ProtocolBuffer

减少连接发起和断开的开销

##一致性Hash负载分配

简单Hash算法负载分配会导致负载波动，当增加新的服务节点时，会改变大量原有用户的服务节点选择。而一致性Hash只会对一部分需要被分流的用户产生影响。